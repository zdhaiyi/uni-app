if("undefined"==typeof Promise||Promise.prototype.finally||(Promise.prototype.finally=function(e){const t=this.constructor;return this.then((n=>t.resolve(e()).then((()=>n))),(n=>t.resolve(e()).then((()=>{throw n}))))}),"undefined"!=typeof uni&&uni&&uni.requireGlobal){const e=uni.requireGlobal();ArrayBuffer=e.ArrayBuffer,Int8Array=e.Int8Array,Uint8Array=e.Uint8Array,Uint8ClampedArray=e.Uint8ClampedArray,Int16Array=e.Int16Array,Uint16Array=e.Uint16Array,Int32Array=e.Int32Array,Uint32Array=e.Uint32Array,Float32Array=e.Float32Array,Float64Array=e.Float64Array,BigInt64Array=e.BigInt64Array,BigUint64Array=e.BigUint64Array}uni.restoreGlobal&&uni.restoreGlobal(Vue,weex,plus,setTimeout,clearTimeout,setInterval,clearInterval),function(e){"use strict";function t(e){return weex.requireModule(e)}function n(e,t,...n){uni.__log__?uni.__log__(e,t,...n):console[e].apply(console,[...n,t])}const a=(t,n=0)=>(n,a=e.getCurrentInstance())=>{!e.isInSSRComponentSetup&&e.injectHook(t,n,a)},s=a("onShow",3),i=a("onHide",3),o=a("onLaunch",1),l=a("onReachBottom",2),r=a("onPullDownRefresh",2),c=(e,t)=>{const n=e.__vccOpts||e;for(const[a,s]of t)n[a]=s;return n},u=c({__name:"uni-icons",props:{type:{type:String,default:""},size:{type:[Number,String],default:32},color:{type:String,default:"#333"}},setup:t=>(n,a)=>(e.openBlock(),e.createElementBlock("view",{class:e.normalizeClass(["uni-icons",[t.type?"uni-icons-"+t.type:""]]),style:e.normalizeStyle({color:t.color,"font-size":t.size+"rpx"})},["compass"===t.type?(e.openBlock(),e.createElementBlock("text",{key:0},"ğŸ§­")):"chat"===t.type?(e.openBlock(),e.createElementBlock("text",{key:1},"ğŸ’¬")):"chatboxes"===t.type?(e.openBlock(),e.createElementBlock("text",{key:2},"ğŸ“¨")):"personadd"===t.type?(e.openBlock(),e.createElementBlock("text",{key:3},"ğŸ‘¤")):"camera"===t.type?(e.openBlock(),e.createElementBlock("text",{key:4},"ğŸ“·")):"person"===t.type?(e.openBlock(),e.createElementBlock("text",{key:5},"ğŸ‘¥")):"game"===t.type?(e.openBlock(),e.createElementBlock("text",{key:6},"ğŸ®")):"more"===t.type?(e.openBlock(),e.createElementBlock("text",{key:7},"â‹¯")):"refresh"===t.type?(e.openBlock(),e.createElementBlock("text",{key:8},"ğŸ”„")):(e.openBlock(),e.createElementBlock("text",{key:9},"â“"))],6))},[["__scopeId","data-v-facdfa89"]]);const d=new class{constructor(){this.isConnected=!1,this.isConnecting=!1,this.statusCallback=null,this.vpnPlugin=null,this.isInitialized=!1,this.connectionState="disconnected",this.lastStatus=null,this.retryCount=0,this.maxRetries=3}checkPluginAvailability(){return new Promise((e=>{try{0;e(!!t("MyVpnPlugin"))}catch(a){n("error","at utils/android-vpn.js:33","æ£€æŸ¥æ’ä»¶å¯ç”¨æ€§å¤±è´¥:",a),e(!1)}}))}async diagnosePlugin(){n("log","at utils/android-vpn.js:40","=== VPNæ’ä»¶è¯Šæ–­ ===");const e=uni.getSystemInfoSync();n("log","at utils/android-vpn.js:44","è¿è¡Œå¹³å°:",e.platform),n("log","at utils/android-vpn.js:45","åº”ç”¨ç‰ˆæœ¬:",e.appVersion),n("log","at utils/android-vpn.js:48","requireNativePlugin ç±»å‹:","function");try{const e=t("MyVpnPlugin");if(n("log","at utils/android-vpn.js:53","æ’ä»¶åŠ è½½ç»“æœ:",e?"æˆåŠŸ":"å¤±è´¥"),n("log","at utils/android-vpn.js:54","æ’ä»¶å¯¹è±¡ç±»å‹:",typeof e),e){["startVpn","stopVpn","getVpnStatus","onVpnStatusUpdate"].forEach((t=>{n("log","at utils/android-vpn.js:60",`${t} æ–¹æ³•:`,"function"==typeof e[t]?"å­˜åœ¨":"ç¼ºå¤±")}))}}catch(a){n("log","at utils/android-vpn.js:64","æ’ä»¶åŠ è½½å¼‚å¸¸:",a.message)}n("log","at utils/android-vpn.js:67","=== è¯Šæ–­ç»“æŸ ===")}async verifyPlugin(){n("log","at utils/android-vpn.js:72","=== éªŒè¯æ’ä»¶å¯ç”¨æ€§ ===");try{const e=uni.getSystemInfoSync();if(n("log","at utils/android-vpn.js:77","è¿è¡Œå¹³å°:",e.platform),"android"!==e.platform)return n("log","at utils/android-vpn.js:80","éAndroidå¹³å°ï¼Œè·³è¿‡æ’ä»¶éªŒè¯"),!1;0,n("log","at utils/android-vpn.js:91","å°è¯•åŠ è½½æ’ä»¶...");const a=t("MyVpnPlugin");if(n("log","at utils/android-vpn.js:93","æ’ä»¶åŠ è½½ç»“æœ:",a),!a)return n("error","at utils/android-vpn.js:96","æ’ä»¶åŠ è½½è¿”å› null"),!1;let s=!0;return["startVpn","stopVpn","getVpnStatus","onVpnStatusUpdate"].forEach((e=>{const t="function"==typeof a[e];n("log","at utils/android-vpn.js:106",`æ–¹æ³• ${e}: ${t?"å­˜åœ¨":"ç¼ºå¤±"}`),t||(s=!1)})),n("log","at utils/android-vpn.js:110","æ’ä»¶éªŒè¯ç»“æœ:",s?"é€šè¿‡":"å¤±è´¥"),s}catch(e){return n("error","at utils/android-vpn.js:114","æ’ä»¶éªŒè¯å¼‚å¸¸:",e),!1}}async initialize(){if(this.isInitialized)return n("log","at utils/android-vpn.js:123","VPNåŠŸèƒ½å·²åˆå§‹åŒ–"),this.pluginAvailable;await this.diagnosePlugin(),n("log","at utils/android-vpn.js:128","å¼€å§‹åˆå§‹åŒ–VPNåŠŸèƒ½"),this.pluginAvailable=await this.verifyPlugin(),n("log","at utils/android-vpn.js:131","æ’ä»¶å¯ç”¨çŠ¶æ€:",this.pluginAvailable);try{const a=uni.getSystemInfoSync();if(n("log","at utils/android-vpn.js:136","ç³»ç»Ÿå¹³å°:",a.platform),"android"!==a.platform)return n("warn","at utils/android-vpn.js:139","VPNåŠŸèƒ½ä»…æ”¯æŒAndroidå¹³å°"),this.isInitialized=!0,this.pluginAvailable=!1,!1;0;try{if(this.vpnPlugin=t("MyVpnPlugin"),!this.vpnPlugin)throw new Error("æ’ä»¶åŠ è½½è¿”å›null");"function"!=typeof this.vpnPlugin.startVpn||"function"!=typeof this.vpnPlugin.stopVpn?(n("error","at utils/android-vpn.js:163","VPNæ’ä»¶æ–¹æ³•ä¸å®Œæ•´"),this.pluginAvailable=!1):(this.pluginAvailable=!0,n("log","at utils/android-vpn.js:167","VPNæ’ä»¶åŠ è½½æˆåŠŸï¼Œæ–¹æ³•æ£€æŸ¥é€šè¿‡"))}catch(e){n("error","at utils/android-vpn.js:170","åŠ è½½VPNæ’ä»¶å¤±è´¥:",e),this.pluginAvailable=!1}return this.pluginAvailable&&await this.setupStatusListener(),this.isInitialized=!0,n("log","at utils/android-vpn.js:180","VPNåŠŸèƒ½åˆå§‹åŒ–å®Œæˆï¼Œæ’ä»¶å¯ç”¨çŠ¶æ€:",this.pluginAvailable),this.pluginAvailable}catch(a){return n("error","at utils/android-vpn.js:192","VPNåˆå§‹åŒ–å¼‚å¸¸:",a),this.isInitialized=!0,this.pluginAvailable=!1,!1}}async setupStatusListener(){if(this.vpnPlugin&&"function"==typeof this.vpnPlugin.onVpnStatusUpdate)return new Promise((e=>{try{this.vpnPlugin.onVpnStatusUpdate({},(e=>{n("log","at utils/android-vpn.js:209","æ”¶åˆ°åŸç”ŸVPNçŠ¶æ€æ›´æ–°:",JSON.stringify(e)),this.handleNativeStatusUpdate(e)})),n("log","at utils/android-vpn.js:212","VPNçŠ¶æ€ç›‘å¬æ³¨å†ŒæˆåŠŸ"),e(!0)}catch(t){n("error","at utils/android-vpn.js:215","æ³¨å†ŒçŠ¶æ€ç›‘å¬å¤±è´¥:",t),e(!1)}}));n("warn","at utils/android-vpn.js:202","VPNæ’ä»¶ä¸æ”¯æŒçŠ¶æ€ç›‘å¬ï¼Œä½¿ç”¨æ¨¡æ‹Ÿæ¨¡å¼")}handleNativeStatusUpdate(e){if(!e||"object"!=typeof e)return void n("warn","at utils/android-vpn.js:224","æ— æ•ˆçš„çŠ¶æ€æ›´æ–°æ•°æ®");const t=!!e.connected||!!e.isConnected,a=e.message||"çŠ¶æ€æ›´æ–°",s=e.status||(t?"connected":"disconnected");if(this.lastStatus=e,this.isConnected=t,this.isConnecting=!1,this.connectionState=s,n("log","at utils/android-vpn.js:237","å¤„ç†VPNçŠ¶æ€æ›´æ–°:",{connected:t,status:s,message:a}),t&&(this.retryCount=0),this.statusCallback){const n={connected:t,isConnected:t,status:s,message:a,timestamp:e.timestamp||Date.now(),success:!1!==e.success};this.statusCallback(n)}}async connect(e){try{if(this.isInitialized||await this.initialize(),!this.pluginAvailable){let t="VPNæ’ä»¶ä¸å¯ç”¨ - ";return this.vpnPlugin?"function"!=typeof this.vpnPlugin.startVpn?t+="startVpnæ–¹æ³•ä¸å­˜åœ¨":t+="æœªçŸ¥åŸå› ":t+="æ’ä»¶å¯¹è±¡ä¸ºnull",n("warn","at utils/android-vpn.js:281",t+"ï¼Œä½¿ç”¨æ¨¡æ‹Ÿæ¨¡å¼"),this.mockConnect(e)}if(this.isConnecting)throw new Error("VPNè¿æ¥æ­£åœ¨è¿›è¡Œä¸­");if(this.isConnected)throw new Error("VPNå·²è¿æ¥ï¼Œè¯·å…ˆæ–­å¼€");if(!e||!e.host||!e.port)throw new Error("èŠ‚ç‚¹ä¿¡æ¯ä¸å®Œæ•´");return n("log","at utils/android-vpn.js:299","å¼€å§‹è¿æ¥VPNï¼ŒæœåŠ¡å™¨:",e.host+":"+e.port),this.isConnecting=!0,this.connectionState="connecting",new Promise(((t,a)=>{const s={server:e.host,port:parseInt(e.port)||1080,username:e.account||"default",password:e.password||"default"};n("log","at utils/android-vpn.js:312","è°ƒç”¨åŸç”Ÿè¿æ¥æ–¹æ³•:",s);const i=setTimeout((()=>{a(new Error("VPNè¿æ¥è¶…æ—¶ï¼ˆ30ç§’ï¼‰"))}),3e4);this.vpnPlugin.startVpn(s,(e=>{if(clearTimeout(i),n("log","at utils/android-vpn.js:321","åŸç”Ÿè¿æ¥å›è°ƒ:",JSON.stringify(e)),this.isConnecting=!1,e&&e.success)this.isConnected=!0,this.connectionState="connected",t(e);else{const t=e?e.message:"è¿æ¥å¤±è´¥ï¼Œæ— è¿”å›ç»“æœ";this.isConnected=!1,this.connectionState="disconnected",a(new Error(t))}}))}))}catch(t){throw this.isConnecting=!1,this.isConnected=!1,this.connectionState="error",n("error","at utils/android-vpn.js:342","VPNè¿æ¥é”™è¯¯:",t),t}}handleConnectionError(e,t){this.isConnecting=!1,this.isConnected=!1,this.connectionState="error",n("error","at utils/android-vpn.js:353","VPNè¿æ¥é”™è¯¯:",e),this.triggerStatusUpdate(!1,e,"error"),t&&t(new Error(e))}async disconnect(){n("log","at utils/android-vpn.js:365","å¼€å§‹æ–­å¼€VPNè¿æ¥");try{if(!this.isConnected&&!this.isConnecting)return n("log","at utils/android-vpn.js:369","VPNæœªè¿æ¥ï¼Œæ— éœ€æ–­å¼€"),{success:!0,message:"VPNæœªè¿æ¥",wasConnected:!1};if(this.triggerStatusUpdate(!1,"æ­£åœ¨æ–­å¼€è¿æ¥...","disconnecting"),!this.vpnPlugin)throw new Error("VPNæ’ä»¶æœªåˆå§‹åŒ–");return new Promise(((e,t)=>{this.vpnPlugin.stopVpn({},(a=>{if(n("log","at utils/android-vpn.js:387","åŸç”Ÿæ–­å¼€å›è°ƒ:",JSON.stringify(a)),this.isConnecting=!1,a&&a.success)n("log","at utils/android-vpn.js:392","VPNæ–­å¼€æŒ‡ä»¤å‘é€æˆåŠŸ"),e({success:!0,message:"VPNæ–­å¼€æŒ‡ä»¤å·²å‘é€",wasConnected:!0});else{const e=a?a.message:"æ–­å¼€å¤±è´¥";this.handleDisconnectionError(e,t)}}))}))}catch(e){this.handleDisconnectionError(e.message,(()=>{throw e}))}}handleDisconnectionError(e,t){n("error","at utils/android-vpn.js:420","VPNæ–­å¼€é”™è¯¯:",e),this.isConnected=!1,this.isConnecting=!1,this.connectionState="disconnected",this.triggerStatusUpdate(!1,e,"error"),t&&t(new Error(e))}onStatusUpdate(e){n("log","at utils/android-vpn.js:436","æ³¨å†ŒçŠ¶æ€æ›´æ–°å›è°ƒ"),this.statusCallback=e,this.statusCallback&&this.triggerStatusUpdate(this.isConnected,this.isConnected?"å·²è¿æ¥":"æœªè¿æ¥",this.connectionState)}triggerStatusUpdate(e,t,a=null){const s={connected:e,isConnected:e,status:a||(e?"connected":"disconnected"),message:t,timestamp:Date.now()};n("log","at utils/android-vpn.js:457","è§¦å‘çŠ¶æ€æ›´æ–°:",s),this.statusCallback&&this.statusCallback(s)}offStatusUpdate(){n("log","at utils/android-vpn.js:466","ç§»é™¤çŠ¶æ€ç›‘å¬"),this.statusCallback=null}async getStatus(){try{return this.isInitialized||await this.initialize(),this.vpnPlugin&&"function"==typeof this.vpnPlugin.getVpnStatus?new Promise((e=>{this.vpnPlugin.getVpnStatus({},(t=>{n("log","at utils/android-vpn.js:481","è·å–VPNçŠ¶æ€ç»“æœ:",JSON.stringify(t)),t&&this.handleNativeStatusUpdate(t),e(t||{isConnected:this.isConnected,connected:this.isConnected,status:this.connectionState,message:"çŠ¶æ€æŸ¥è¯¢å®Œæˆ",success:!0})}))})):{isConnected:this.isConnected,connected:this.isConnected,status:this.connectionState,message:"å½“å‰çŠ¶æ€",success:!0}}catch(e){return n("error","at utils/android-vpn.js:505","è·å–çŠ¶æ€é”™è¯¯:",e),{isConnected:!1,connected:!1,status:"error",message:e.message,success:!1}}}getConnectionSummary(){return{isConnected:this.isConnected,isConnecting:this.isConnecting,connectionState:this.connectionState,lastStatus:this.lastStatus}}async mockConnect(e){return n("log","at utils/android-vpn.js:528","æ¨¡æ‹ŸVPNè¿æ¥:",e.host),new Promise((e=>{setTimeout((()=>{this.isConnecting=!1,this.isConnected=!0,this.connectionState="connected",this.triggerStatusUpdate(!0,"æ¨¡æ‹Ÿè¿æ¥æˆåŠŸ","connected"),e({success:!0,message:"æ¨¡æ‹Ÿè¿æ¥æˆåŠŸ"})}),2e3)}))}async mockDisconnect(){return n("log","at utils/android-vpn.js:547","æ¨¡æ‹ŸVPNæ–­å¼€"),new Promise((e=>{setTimeout((()=>{this.isConnected=!1,this.connectionState="disconnected",this.triggerStatusUpdate(!1,"æ¨¡æ‹Ÿæ–­å¼€æˆåŠŸ","disconnected"),e({success:!0,message:"æ¨¡æ‹Ÿæ–­å¼€æˆåŠŸ",wasConnected:!0})}),1e3)}))}},p=c({__name:"index",setup(t){const n=e.ref(!1),a=e.ref(""),i=e.ref(""),o=e.ref(!1),c=e.ref(!1),p=e.ref("æœªè¿æ¥"),v=e.ref("--"),g=e.ref("--"),h=e.ref("è¿æ¥VPN"),m=e.ref(null),y=e.ref([0]),f=e.ref([]),w=e.ref(0),V=e.ref(null),S=e.ref(1),N=e.ref(20),E=e.ref(!1),k=e.ref(!1),C=e.ref([{name:"æµè§ˆå™¨",icon:"compass"},{name:"WhatsApp",icon:"chat"},{name:"Telegram",icon:"chatboxes"},{name:"Twitter",icon:"personadd"},{name:"Instagram",icon:"camera"},{name:"Facebook",icon:"person"},{name:"æ¸¸æˆ",icon:"game"},{name:"å…¨éƒ¨åº”ç”¨",icon:"more"}]),P=e.computed((()=>o.value?"connected":c.value?"connecting":"disconnected")),A=e.computed((()=>f.value.filter((e=>{const t=!0===e.status,n=new Date(e.expire)>new Date;return t&&n}))));e.onMounted((()=>{j(),x()})),s((()=>{n.value&&(S.value=1,E.value=!1,b(!1))})),e.onUnmounted((()=>{V.value&&(clearInterval(V.value),V.value=null),d.offStatusUpdate()}));const x=async()=>{if("android"===uni.getSystemInfoSync().platform)try{await d.initialize(),d.onStatusUpdate((e=>{I(e)}));const e=await d.getStatus();I(e)}catch(e){I({connected:!1,isConnected:!1,status:"disconnected",message:"åˆå§‹åŒ–å¤±è´¥"})}else I({connected:!1,isConnected:!1,status:"unsupported",message:"å½“å‰å¹³å°ä¸æ”¯æŒVPN"})};l((()=>{E.value||k.value||(S.value++,b(!0))})),r((async()=>{S.value=1,E.value=!1,k.value=!1,await b(!1),uni.stopPullDownRefresh()}));const j=()=>{const e=uni.getStorageSync("token"),t=uni.getStorageSync("username");e&&t&&(n.value=!0,a.value=t,i.value=e)},b=async(e=!1)=>{var t;if(n.value){if(!k.value){k.value=!0,e||uni.showLoading({title:"è·å–èŠ‚ç‚¹ä¸­..."});try{const n=await uni.request({url:"http://124.223.21.69/api/nodes",method:"GET",data:{page:S.value,pageSize:N.value},header:{Authorization:"Bearer "+i.value}});if(200!==n.statusCode||!n.data)throw new Error((null==(t=n.data)?void 0:t.message)||"è·å–èŠ‚ç‚¹å¤±è´¥");{let t=[];t=Array.isArray(n.data)?n.data:n.data.nodes&&Array.isArray(n.data.nodes)?n.data.nodes:n.data.data&&Array.isArray(n.data.data)?n.data.data:[];const a=t.map((e=>({...e,displayName:e.tag||"æœªçŸ¥èŠ‚ç‚¹",isAvailable:!0===e.status&&new Date(e.expire)>new Date,expireText:z(e.expire),hasAuth:!(!e.account||!e.password)})));if(e)f.value=[...f.value,...a];else{f.value=a;const e=a.findIndex((e=>e.isAvailable));-1!==e?m.value=e:a.length>0&&(m.value=0)}const s=n.data.total||t.length;(t.length<N.value||f.value.length>=s)&&(E.value=!0),e||uni.hideLoading()}}catch(a){e||uni.hideLoading(),uni.showToast({title:"è·å–èŠ‚ç‚¹å¤±è´¥",icon:"none"})}finally{k.value=!1}}}else uni.showToast({title:"è¯·å…ˆç™»å½•",icon:"none"})},B=()=>{n.value?uni.showModal({title:"ç¡®è®¤é€€å‡º",content:"ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ",success:e=>{e.confirm&&(uni.removeStorageSync("token"),uni.removeStorageSync("username"),n.value=!1,i.value="",f.value=[],m.value=null,o.value&&T(),uni.showToast({title:"å·²é€€å‡ºç™»å½•",icon:"success"}))}}):uni.navigateTo({url:"/pages/login/login"})},T=async()=>{try{await d.disconnect()}catch(e){uni.showToast({title:e.message||"æ–­å¼€VPNå¤±è´¥",icon:"none"})}},_=async()=>{if(c.value)return;if(!n.value)return void uni.showToast({title:"è¯·å…ˆç™»å½•",icon:"none"});if(0===f.value.length)return void uni.showToast({title:"æš‚æ— å¯ç”¨èŠ‚ç‚¹",icon:"none"});if(null===m.value)return void uni.showToast({title:"è¯·å…ˆé€‰æ‹©èŠ‚ç‚¹",icon:"none"});const e=f.value[m.value];e.isAvailable?e.hasAuth?(o.value,c.value,e.tag,o.value?await T():await(async()=>{if(c.value)return void uni.showToast({title:"è¿æ¥æ­£åœ¨è¿›è¡Œä¸­ï¼Œè¯·ç¨å€™",icon:"none",duration:1e3});if(!n.value)return void uni.showToast({title:"è¯·å…ˆç™»å½•",icon:"none"});if(null===m.value)return void uni.showToast({title:"è¯·å…ˆé€‰æ‹©èŠ‚ç‚¹",icon:"none"});const e=f.value[m.value];if(e.isAvailable)if(e.hasAuth){e.tag,c.value=!0,p.value="è¿æ¥ä¸­...",h.value="è¿æ¥ä¸­";try{await d.connect(e)}catch(t){}}else uni.showToast({title:"å½“å‰èŠ‚ç‚¹ç¼ºå°‘è®¤è¯ä¿¡æ¯",icon:"none"});else uni.showToast({title:"å½“å‰èŠ‚ç‚¹ä¸å¯ç”¨",icon:"none"})})()):uni.showToast({title:"å½“å‰èŠ‚ç‚¹ç¼ºå°‘è®¤è¯ä¿¡æ¯",icon:"none"}):uni.showToast({title:"å½“å‰èŠ‚ç‚¹ä¸å¯ç”¨",icon:"none"})},I=e=>{const t=void 0!==e.connected?e.connected:void 0!==e.isConnected&&e.isConnected;if(o.value=t,c.value=!1,t){if(p.value="å·²è¿æ¥",h.value="æ–­å¼€è¿æ¥",null!==m.value){const e=f.value[m.value];v.value=`${e.tag} Â· ${e.host}:${e.port}`}w.value=0,D(),V.value&&clearInterval(V.value),V.value=setInterval(D,1e3),uni.showToast({title:e.message||"VPNè¿æ¥æˆåŠŸ",icon:"success",duration:2e3})}else p.value=e.message||"æœªè¿æ¥",h.value="è¿æ¥VPN",v.value="--",g.value="--",V.value&&(clearInterval(V.value),V.value=null),e.message&&"æœªè¿æ¥"!==e.message&&!e.message.includes("åˆå§‹åŒ–")&&uni.showToast({title:e.message,icon:"none",duration:2e3})},D=()=>{w.value++;const e=Math.floor(w.value/3600),t=Math.floor(w.value%3600/60),n=w.value%60;g.value=e>0?`è¿æ¥æ—¶é—´: ${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`:`è¿æ¥æ—¶é—´: ${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`},U=e=>{const t={"å¹¿ä¸œ":"ğŸ‡¨ğŸ‡³","æ²³é—´":"ğŸ‡¨ğŸ‡³","å¤©æ´¥":"ğŸ‡¨ğŸ‡³","å®æ³¢":"ğŸ‡¨ğŸ‡³","è ¡å¿":"ğŸ‡¨ğŸ‡³","æ¾„æµ·":"ğŸ‡¨ğŸ‡³","å‡¤ç¿”":"ğŸ‡¨ğŸ‡³"};for(const[n,a]of Object.entries(t))if(e.includes(n))return a;return"ğŸŒ"},z=e=>{if(!e)return"æœªçŸ¥";const t=new Date(e),n=new Date,a=Math.abs(n-t),s=Math.ceil(a/864e5);return s<=30?`${s}å¤©åè¿‡æœŸ`:`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}`};return(t,s)=>(e.openBlock(),e.createElementBlock("view",{class:"container"},[e.createElementVNode("view",{class:"header"},[e.createElementVNode("view",{class:"user-info"},[n.value?(e.openBlock(),e.createElementBlock("text",{key:0,class:"welcome-text"},"æ¬¢è¿, "+e.toDisplayString(a.value),1)):(e.openBlock(),e.createElementBlock("text",{key:1,class:"welcome-text"},"è¯·å…ˆç™»å½•")),e.createElementVNode("button",{class:"btn-auth",onClick:B},e.toDisplayString(n.value?"é€€å‡ºç™»å½•":"ç™»å½•"),1)])]),e.createElementVNode("view",{class:"vpn-status-card"},[e.createElementVNode("view",{class:"status-header"},[e.createElementVNode("view",{class:e.normalizeClass(["status-indicator",P.value])},null,2),e.createElementVNode("text",{class:"status-text"},e.toDisplayString(p.value),1)]),e.createElementVNode("view",{class:"connection-info"},e.toDisplayString(v.value),1),e.createElementVNode("view",{class:"connection-time"},e.toDisplayString(g.value),1),e.createElementVNode("button",{class:e.normalizeClass(["btn-connect",{connecting:c.value}]),onClick:_,disabled:!n.value||0===A.value.length||null===m.value},e.toDisplayString(h.value),11,["disabled"])]),e.createElementVNode("view",{class:"section"},[e.createElementVNode("view",{class:"section-header"},[e.createElementVNode("text",{class:"section-title"},"èŠ‚ç‚¹åˆ—è¡¨"),e.createElementVNode("view",{class:"section-action",onClick:b},[e.createElementVNode("text",{class:"refresh-text"},"åˆ·æ–°"),e.createVNode(u,{type:"refresh",size:"16",color:"#4361ee"})])]),e.createElementVNode("view",{class:"nodes-stats"},[e.createElementVNode("text",{class:"stats-text"},"å¯ç”¨èŠ‚ç‚¹: "+e.toDisplayString(A.value.length)+"/"+e.toDisplayString(f.value.length),1)]),e.createElementVNode("scroll-view",{class:"node-list","scroll-y":""},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(f.value,((t,n)=>(e.openBlock(),e.createElementBlock("view",{key:t._id,class:e.normalizeClass(["node-item",{selected:m.value===n,offline:!t.isAvailable,"no-auth":!t.hasAuth}]),onClick:e=>(e=>{const t=f.value[e];t.isAvailable?t.hasAuth?(m.value=e,o.value&&(v.value=`${t.tag} Â· ${t.host}:${t.port}`),uni.showToast({title:`å·²é€‰æ‹©: ${t.tag}`,icon:"success"})):uni.showToast({title:"è¯¥èŠ‚ç‚¹ç¼ºå°‘è®¤è¯ä¿¡æ¯",icon:"none"}):uni.showToast({title:"è¯¥èŠ‚ç‚¹ä¸å¯ç”¨",icon:"none"})})(n)},[e.createElementVNode("view",{class:"node-info"},[e.createElementVNode("view",{class:"node-flag"},e.toDisplayString(U(t.tag)),1),e.createElementVNode("view",{class:"node-details"},[e.createElementVNode("text",{class:"node-name"},e.toDisplayString(t.tag),1),e.createElementVNode("view",{class:"node-meta"},[e.createElementVNode("text",{class:"node-location"},e.toDisplayString(t.host)+":"+e.toDisplayString(t.port),1),e.createElementVNode("text",{class:"node-expire"},e.toDisplayString(t.expireText),1)])])]),e.createElementVNode("view",{class:"node-status"},[e.createElementVNode("view",{class:"status-indicators"},[e.createElementVNode("text",{class:e.normalizeClass(t.status?"status-online":"status-offline")},e.toDisplayString(t.status?"åœ¨çº¿":"ç¦»çº¿"),3),t.hasAuth?e.createCommentVNode("",!0):(e.openBlock(),e.createElementBlock("text",{key:0,class:"status-noauth"},"æ— è®¤è¯"))]),m.value===n?(e.openBlock(),e.createElementBlock("view",{key:0,class:"selected-indicator"},[e.createVNode(u,{type:"checkmark",size:"16",color:"#4361ee"})])):e.createCommentVNode("",!0)])],10,["onClick"])))),128)),0===f.value.length?(e.openBlock(),e.createElementBlock("view",{key:0,class:"empty-state"},[e.createElementVNode("text",null,"æš‚æ— èŠ‚ç‚¹æ•°æ®ï¼Œè¯·å…ˆç™»å½•æˆ–åˆ·æ–°")])):e.createCommentVNode("",!0)])]),e.createElementVNode("view",{class:"section"},[e.createElementVNode("view",{class:"section-header"},[e.createElementVNode("text",{class:"section-title"},"é€‰æ‹©åº”ç”¨")]),e.createElementVNode("view",{class:"app-list"},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(C.value,((t,n)=>(e.openBlock(),e.createElementBlock("view",{key:n,class:e.normalizeClass(["app-item",{selected:y.value.includes(n)}]),onClick:e=>(e=>{7===e?y.value=[7]:y.value.includes(e)?(y.value=y.value.filter((t=>t!==e)),0===y.value.length&&(y.value=[7])):(y.value=y.value.filter((e=>7!==e)),y.value.push(e))})(n)},[e.createElementVNode("view",{class:"app-icon"},[e.createVNode(u,{type:t.icon,size:"24",color:"#4361ee"},null,8,["type"])]),e.createElementVNode("text",{class:"app-label"},e.toDisplayString(t.name),1)],10,["onClick"])))),128))])]),e.createElementVNode("view",{class:"section tips-section"},[e.createElementVNode("view",{class:"section-header"},[e.createElementVNode("text",{class:"section-title"},"ä½¿ç”¨æç¤º")]),e.createElementVNode("view",{class:"tips-content"},[e.createElementVNode("text",{class:"tip-item"},'â€¢ è¯·é€‰æ‹©çŠ¶æ€ä¸º"åœ¨çº¿"ä¸”æœ‰è®¤è¯ä¿¡æ¯çš„èŠ‚ç‚¹'),e.createElementVNode("text",{class:"tip-item"},"â€¢ è¿æ¥æˆåŠŸåï¼Œæ‰€æœ‰åº”ç”¨æµé‡å°†é€šè¿‡VPN"),e.createElementVNode("text",{class:"tip-item"},"â€¢ é¦–æ¬¡è¿æ¥éœ€è¦æˆäºˆVPNæƒé™")])])]))}},[["__scopeId","data-v-7156ce4e"]]),v=c({__name:"login",setup(t){const a=e.ref("test_pan_1234"),s=e.ref("123456"),i=async()=>{if(a.value&&s.value){uni.showLoading({title:"ç™»å½•ä¸­..."});try{const e=await uni.request({url:"http://124.223.21.69/api/users/login",method:"POST",data:{username:a.value,password:s.value},header:{"Content-Type":"application/json"}});if(200!==e.statusCode||!e.data)throw new Error("ç™»å½•å¤±è´¥: "+(e.data.message||"æœªçŸ¥é”™è¯¯"));{const t=e.data.token||e.data.accessToken;if(!t)throw new Error("ç™»å½•å¤±è´¥: æœªè·å–åˆ°token");uni.setStorageSync("token",t),uni.setStorageSync("username",a.value),uni.hideLoading(),uni.showToast({title:"ç™»å½•æˆåŠŸ",icon:"success"}),setTimeout((()=>{uni.reLaunch({url:"/pages/index/index"})}),1500)}}catch(e){uni.hideLoading(),uni.showToast({title:"ç™»å½•å¤±è´¥",icon:"none"}),n("error","at pages/login/login.vue:99","ç™»å½•å¤±è´¥:",e)}}else uni.showToast({title:"è¯·è¾“å…¥ç”¨æˆ·åå’Œå¯†ç ",icon:"none"})};return(t,n)=>(e.openBlock(),e.createElementBlock("view",{class:"login-container"},[e.createElementVNode("view",{class:"login-header"},[e.createElementVNode("view",{class:"title-container"},[e.createElementVNode("image",{class:"title-icon",src:"/static/icon.ico",mode:"aspectFit"}),e.createElementVNode("text",{class:"login-title"},"eåŠ é€Ÿ")]),e.createElementVNode("text",{class:"login-subtitle"},"è¯·ç™»å½•æ‚¨çš„VPNè´¦æˆ·")]),e.createElementVNode("view",{class:"login-form"},[e.createElementVNode("view",{class:"input-group"},[e.createElementVNode("text",{class:"input-label"},"ç”¨æˆ·å"),e.withDirectives(e.createElementVNode("input",{class:"input-field",type:"text","onUpdate:modelValue":n[0]||(n[0]=e=>a.value=e),placeholder:"è¯·è¾“å…¥ç”¨æˆ·å"},null,512),[[e.vModelText,a.value]])]),e.createElementVNode("view",{class:"input-group"},[e.createElementVNode("text",{class:"input-label"},"å¯†ç "),e.withDirectives(e.createElementVNode("input",{class:"input-field",type:"password","onUpdate:modelValue":n[1]||(n[1]=e=>s.value=e),placeholder:"è¯·è¾“å…¥å¯†ç "},null,512),[[e.vModelText,s.value]])]),e.createElementVNode("button",{class:"btn-login",onClick:i},"ç™»å½•"),e.createElementVNode("view",{class:"login-tips"})])]))}},[["__scopeId","data-v-b76c3a1a"]]);__definePage("pages/index/index",p),__definePage("pages/login/login",v);const g={__name:"App",setup:e=>(o((()=>{n("log","at App.vue:6","App Launch");uni.getStorageSync("token")&&uni.reLaunch({url:"/pages/index/index"})})),n("log","at App.vue:18","App Show"),i((()=>{n("log","at App.vue:22","App Hide")})),()=>{})};const{app:h,Vuex:m,Pinia:y}={app:e.createVueApp(g)};uni.Vuex=m,uni.Pinia=y,h.provide("__globalStyles",__uniConfig.styles),h._component.mpType="app",h._component.render=()=>{},h.mount("#app")}(Vue);
